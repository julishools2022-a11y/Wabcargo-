<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WAB Cargo | Global Logistics</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        :root { --black: #050505; --charcoal: #1a1a1a; --white: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--white); color: var(--charcoal); overflow-x: hidden; }

        /* UTILITIES */
        .font-industrial { font-family: 'Archivo Black', sans-serif; letter-spacing: -2px; text-transform: uppercase; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* NAVBAR (Hidden Login Logic) */
        .navbar { background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px); padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .navbar-brand { font-size: 1.5rem; color: white !important; cursor: pointer; user-select: none; }
        .nav-link { color: #888 !important; font-weight: 600; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; margin: 0 10px; transition: 0.3s; }
        .nav-link:hover { color: white !important; }
        .navbar-toggler { border: none; outline: none; box-shadow: none; background: grey; }
        .navbar-collapse { background: black; padding: 20px; text-align: center; }

        /* HERO */
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?auto=format&fit=crop&w=1950&q=80');
            background-size: cover; background-position: center; background-attachment: fixed;
            min-height: 100vh; min-height: 100dvh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; color: white; padding: 80px 20px;
        }
        .hero-title { font-size: clamp(3rem, 10vw, 6rem); line-height: 0.9; margin-bottom: 15px; position: relative; z-index: 2; }
        .hero-sub { font-size: clamp(1rem, 3vw, 1.25rem); font-weight: 300; opacity: 0.8; margin-bottom: 40px; position: relative; z-index: 2; }

        /* TRACKING */
        .tracking-container { width: 100%; max-width: 700px; position: relative; z-index: 10; margin-bottom: -100px; }
        .tracking-box { background: white; padding: 15px; display: flex; gap: 10px; box-shadow: 0 30px 60px rgba(0,0,0,0.5); border: 1px solid rgba(0,0,0,0.1); }
        .track-input { border: 2px solid #eee; background: #f9f9f9; flex-grow: 1; padding: 20px; font-size: 1.1rem; font-family: 'JetBrains Mono', monospace; font-weight: 700; color: black; text-transform: uppercase; width: 100%; }
        .track-btn { background: black; color: white; border: none; padding: 0 50px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; transition: 0.3s; white-space: nowrap; }
        @media (max-width: 768px) { .tracking-box { flex-direction: column; padding: 20px; } .track-btn { padding: 20px; width: 100%; } .tracking-container { margin-bottom: -50px; } }

        /* MANIFEST CARD */
        .result-wrapper { display: none; margin: 120px auto 50px; max-width: 800px; padding: 0 20px; }
        .manifest-card { background: white; border: 2px solid black; box-shadow: 15px 15px 0 rgba(0,0,0,0.1); animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        .manifest-header { background: black; color: white; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .status-badge { background: white; color: black; padding: 5px 15px; font-family: 'JetBrains Mono'; font-weight: 700; font-size: 0.8rem; }
        .manifest-grid { display: grid; grid-template-columns: 1fr 1fr; border-bottom: 2px solid black; }
        .manifest-cell { padding: 30px; border-right: 2px solid black; } .manifest-cell:last-child { border-right: none; }
        @media(max-width: 576px) { .manifest-grid { grid-template-columns: 1fr; } .manifest-cell { border-right: none; border-bottom: 2px solid black; padding: 20px; } }
        .label-mono { font-size: 0.7rem; text-transform: uppercase; color: #888; display: block; margin-bottom: 5px; font-weight: 700; }
        .value-text { font-size: 1.5rem; font-weight: 800; font-family: 'Archivo Black'; line-height: 1; word-wrap: break-word; }

        /* SERVICES */
        .services-section { padding: 120px 0 80px; background: var(--white); }
        .service-card { padding: 40px 30px; background: white; border: 1px solid #eee; height: 100%; transition: 0.4s; position: relative; overflow: hidden; }
        .service-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 0%; background: black; transition: 0.4s; z-index: 0; }
        .service-card:hover::before { height: 100%; }
        .service-card:hover * { color: white !important; position: relative; z-index: 1; }
        .service-icon { font-size: 2.5rem; margin-bottom: 25px; color: black; }
        .service-title { font-weight: 800; font-size: 1.2rem; text-transform: uppercase; margin-bottom: 10px; color: black; }
        .service-desc { font-size: 0.9rem; color: #666; line-height: 1.6; }

        /* CTA & FOOTER */
        .cta-section { background: black; color: white; padding: 100px 20px; text-align: center; }
        .btn-outline-white { background: transparent; border: 3px solid white; color: white; padding: 18px 60px; font-weight: 900; text-transform: uppercase; letter-spacing: 2px; display: inline-block; margin-top: 30px; text-decoration: none; transition: 0.3s; cursor: pointer; }
        .btn-outline-white:hover { background: white; color: black; }
        .footer { background: #0a0a0a; color: #444; padding: 80px 0 40px; }
        .footer h5 { color: white; font-family: 'Archivo Black'; margin-bottom: 20px; }
        .footer a { color: #666; text-decoration: none; transition: 0.3s; }
        .footer a:hover { color: white; }

        /* TIMELINE & MODAL */
        .timeline { border-left: 4px solid black; margin-left: 10px; padding-left: 35px; }
        .timeline-item { position: relative; margin-bottom: 35px; }
        .timeline-dot { width: 20px; height: 20px; background: black; position: absolute; left: -47px; top: 3px; border: 4px solid white; outline: 2px solid black; }
        .timeline-item.latest .timeline-dot { background: white; border: 4px solid black; transform: scale(1.2); }
        .modal-content { border-radius: 0; border: 4px solid black; box-shadow: 20px 20px 0 rgba(0,0,0,0.2); }
        .modal-header { background: black; color: white; border: none; border-radius: 0; padding: 20px 30px; }
        .form-control, .form-select { border-radius: 0; border: 2px solid #ddd; padding: 12px; font-weight: 600; }
        .btn-quote-submit { background: black; color: white; border: 2px solid black; padding: 15px; font-weight: 900; width: 100%; text-transform: uppercase; transition: 0.3s; }
        .btn-quote-submit:hover { background: white; color: black; }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .animate-up { animation: slideUp 0.8s ease-out forwards; opacity: 0; }
        .delay-1 { animation-delay: 0.2s; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top navbar-dark">
        <div class="container">
            <a class="navbar-brand font-industrial" href="#" ondblclick="window.location.href='signin.html'" title="Double Tap for Admin"> 
                WAB<span style="color:#666">CARGO</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navContent">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" onclick="openQuoteModal()">Get Quote</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="hero-section">
        <div class="hero-badge animate-up">Global Logistics Partner</div>
        <h1 class="hero-title font-industrial animate-up">MOVING GOODS<br>BUILDING TRUST</h1>
        <p class="hero-sub animate-up delay-1">Premium Air, Sea, and Land Freight Solutions.</p>
        
        <div class="tracking-container animate-up delay-1">
            <div class="tracking-box">
                <input type="text" id="trkInput" class="track-input" placeholder="TRK-000-000-000" onkeypress="handleEnter(event)">
                <button onclick="runSearch()" id="trackBtn" class="track-btn">SEARCH</button>
            </div>
        </div>
    </div>

    <div class="result-wrapper" id="resultArea">
        <div class="manifest-card">
            <div class="manifest-header">
                <div>
                    <div class="label-mono text-white-50">WAYBILL NUMBER</div>
                    <div class="font-mono fw-bold fs-5" id="dispTrk">...</div>
                </div>
                <div class="status-badge" id="dispStatus">...</div>
            </div>
            
            <div class="manifest-grid">
                <div class="manifest-cell">
                    <div class="label-mono">ORIGIN PORT</div>
                    <div class="value-text" id="dispOrigin">...</div>
                </div>
                <div class="manifest-cell">
                    <div class="label-mono">FINAL DESTINATION</div>
                    <div class="value-text" id="dispDest">...</div>
                </div>
            </div>

            <div class="timeline-box">
                <h6 class="font-industrial mb-4 pb-2 border-bottom">AUDIT TRAIL</h6>
                <div class="timeline" id="timelineList"></div>
            </div>
        </div>
    </div>

    <div class="services-section" id="services">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="font-industrial" style="font-size: clamp(2rem, 5vw, 3rem);">OUR CAPABILITIES</h2>
                <div style="width: 50px; height: 5px; background: black; margin: 20px auto;"></div>
            </div>

            <div class="row g-4">
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-plane service-icon"></i>
                        <h4 class="service-title">Air Freight</h4>
                        <p class="service-desc">Expedited shipping for time-critical cargo. Global reach with priority handling.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-ship service-icon"></i>
                        <h4 class="service-title">Ocean Cargo</h4>
                        <p class="service-desc">FCL and LCL container solutions. Cost-effective for bulk and heavy goods.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-file-signature service-icon"></i>
                        <h4 class="service-title">Customs Brokerage</h4>
                        <p class="service-desc">48-hour clearing guarantee. We handle complex documentation seamlessly.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-warehouse service-icon"></i>
                        <h4 class="service-title">Warehousing</h4>
                        <p class="service-desc">Secure storage and inventory management systems for your supply chain.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-truck-loading service-icon"></i>
                        <h4 class="service-title">RoRo Shipping</h4>
                        <p class="service-desc">Specialized transport for vehicles, trucks, and heavy industrial machinery.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="service-card">
                        <i class="fas fa-temperature-low service-icon"></i>
                        <h4 class="service-title">Cold Chain</h4>
                        <p class="service-desc">Temperature-controlled logistics for pharmaceuticals and perishables.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cta-section">
        <div class="container">
            <h2 class="font-industrial" style="font-size: clamp(2.5rem, 6vw, 4rem);">READY TO SCALE?</h2>
            <p class="fs-5 opacity-75">Join our network of over 500+ satisfied partners.</p>
            <button onclick="openQuoteModal()" class="btn-outline-white">REQUEST A QUOTE</button>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-5">
                    <h2 class="font-industrial text-white mb-3">WAB CARGO</h2>
                    <p class="mb-4">Setting the standard in global logistics. We deliver reliability, transparency, and speed for businesses worldwide.</p>
                </div>
                <div class="col-lg-3 col-6">
                    <h5>LINKS</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#">Home</a></li>
                        <li class="mb-2"><a href="#services">Services</a></li>
                        <li class="mb-2"><a href="#">Tracking</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-6">
                    <h5>CONTACT</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> 123 Logistics Blvd, Lagos</li>
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> support@wabcargo.com</li>
                        <li class="mb-2"><i class="fas fa-phone me-2"></i> +234 800 WAB CARGO</li>
                    </ul>
                </div>
            </div>
            <div class="border-top border-secondary pt-4 mt-5 text-center small opacity-50">
                &copy; 2026 WAB Cargo Services. All rights reserved.
            </div>
        </div>
    </footer>

    <div class="modal fade" id="quoteModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title font-industrial">GET A QUOTE</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4 p-md-5">
                    <form id="quoteForm" onsubmit="submitQuote(event)">
                        <div class="mb-3">
                            <label class="font-mono small fw-bold mb-1">FULL NAME</label>
                            <input type="text" id="quoteName" class="form-control" placeholder="Enter your name" required>
                        </div>
                        <div class="mb-3">
                            <label class="font-mono small fw-bold mb-1">PHONE NUMBER</label>
                            <input type="tel" id="quotePhone" class="form-control" placeholder="Enter phone number" required>
                        </div>
                        <div class="mb-3">
                            <label class="font-mono small fw-bold mb-1">SERVICE TYPE</label>
                            <select class="form-select" id="quoteService">
                                <option>Air Freight</option>
                                <option>Sea Freight</option>
                                <option>Customs Clearing</option>
                                <option>Warehousing</option>
                                <option>RoRo Shipping</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="font-mono small fw-bold mb-1">DETAILS</label>
                            <textarea id="quoteDetails" class="form-control" rows="3" placeholder="Description of goods..." required></textarea>
                        </div>
                        <button type="submit" class="btn-quote-submit">SUBMIT REQUEST</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // SAFE INIT
        var SB_URL = 'https://pfgyfljvysxqsvuiehez.supabase.co';
        var SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmZ3lmbGp2eXN4cXN2dWllaGV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0MTcyNTMsImV4cCI6MjA4Mzk5MzI1M30.hIt_dGYpiQuKt_LJAfIZlBtnpY6HTt2Dn8xq1gRAXJU';
        if (typeof window.sbHome === 'undefined') { window.sbHome = window.supabase.createClient(SB_URL, SB_KEY); }
        var sb = window.sbHome;

        // QUOTE LOGIC
        function openQuoteModal() { new bootstrap.Modal(document.getElementById('quoteModal')).show(); }
        
        async function submitQuote(e) {
            e.preventDefault();
            const btn = document.querySelector('.btn-quote-submit');
            const originalText = btn.innerText;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> SENDING...';
            btn.disabled = true;

            const name = document.getElementById('quoteName').value;
            const phone = document.getElementById('quotePhone').value;
            const service = document.getElementById('quoteService').value;
            const details = document.getElementById('quoteDetails').value;

            try {
                const { error } = await sb.from('quote_requests').insert([{
                    full_name: name, phone: phone, service_type: service, details: details
                }]);
                if (error) throw error;
                alert("âœ… Request Sent! WAB Cargo will contact you shortly.");
                bootstrap.Modal.getInstance(document.getElementById('quoteModal')).hide();
                e.target.reset(); 
            } catch (err) {
                console.error(err); alert("Error sending request: " + err.message);
            } finally {
                btn.innerText = originalText; btn.disabled = false;
            }
        }

        // TRACKING LOGIC
        function handleEnter(e) { if(e.key === 'Enter') runSearch(); }

        async function runSearch() {
            var btn = document.getElementById('trackBtn');
            var input = document.getElementById('trkInput').value.trim();
            var resultArea = document.getElementById('resultArea');
            var timelineList = document.getElementById('timelineList');

            if(!input) { alert("Please enter a waybill number."); return; }

            btn.innerHTML = '...';
            resultArea.style.display = 'none';

            try {
                var { data: ship, error: err1 } = await sb.from('shipments').select('*').eq('tracking_number', input).single();
                if(err1 || !ship) throw new Error("Waybill not found in system.");

                var { data: history } = await sb.from('shipment_events').select('*').eq('tracking_number', input).order('timestamp', { ascending: false });

                document.getElementById('dispTrk').innerText = ship.tracking_number;
                document.getElementById('dispStatus').innerText = ship.status;
                document.getElementById('dispOrigin').innerText = ship.origin;
                document.getElementById('dispDest').innerText = ship.destination;

                timelineList.innerHTML = '';
                if(history && history.length > 0) {
                    history.forEach((event, idx) => {
                        var isLatest = idx === 0 ? 'latest' : '';
                        var d = new Date(event.timestamp || event.created_at);
                        var dStr = d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});

                        timelineList.innerHTML += `
                            <div class="timeline-item ${isLatest}">
                                <div class="timeline-dot"></div>
                                <div class="font-mono text-muted small fw-bold mb-1">${dStr}</div>
                                <div class="fw-bold text-dark text-uppercase fs-5">${event.status}</div>
                                <div class="text-secondary small text-uppercase font-mono">${event.location}</div>
                            </div>`;
                    });
                } else {
                    timelineList.innerHTML = '<div class="text-muted small">No history available yet.</div>';
                }

                resultArea.style.display = 'block';
                resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });

            } catch (err) {
                alert(err.message);
            } finally {
                btn.innerHTML = 'SEARCH';
            }
        }
    </script>
</body>
</html>
